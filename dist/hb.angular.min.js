"use strict";!function(){angular.module("hb.modules",["hb.qiniuSdk","hb.iscroll"]),angular.module("hb.qiniuSdk",[]).controller("hbQiniuFileUploadController",["$scope","$element","$attrs","$window",function(o,l,n,i){var t;o.qiniuVm=t={};var e=l.find("[hb-qiniu-file-upload-bt]"),r=l.find("[hb-qiniu-file-upload-bt-container]"),u=l.find("[hb-qiniu-file-upload-drag-container]"),c={runtimes:"html5,flash",browse_button:e.get()[0],uptoken:"Your upload token",domain:"http://qiniu-plupload.qiniudn.com/",get_new_uptoken:!1,container:r.get()[0],max_file_size:"100mb",flash_swf_url:"/plupload/js/Moxie.swf",max_retries:3,dragdrop:!0,drop_element:u.get()[0],chunk_size:"5mb",auto_start:!0,init:{FilesAdded:function(o,l){plupload.each(l,function(o){})},BeforeUpload:function(o,l){},UploadProgress:function(l,n){o.$apply(function(){t.progress=l.total.percent})},FileUploaded:function(o,l,n){},Error:function(o,l,n){},UploadComplete:function(){},Key:function(o,l){}}};o.$watch(n.hbQiniuFileUpload,function(o){var l={},n={};angular.forEach(o,function(o,i){"init"==i?n=angular.copy(o):l[i]=o});var i=angular.extend(c,l);if(i.init=angular.extend(c.init,n),o){Qiniu.uploader(i)}})}]).directive("hbQiniuFileUpload",function(){return{controller:"hbQiniuFileUploadController",scope:!0}}),angular.module("hb.iscroll",[]).controller("hbIscrollController",["$scope","$element","$attrs","$window",function(o,l,n,i){var t,e={},r={};o.iscrollVm=t={},console.log("iscroll"),o.$watch("hbIscroll",function(n){console.log(n);var i=n,t=angular.extend({},e,i);r=new IScroll(l.get()[0],t),r.on("scrollStart",function(){console.log("scrollStart")}),r.on("scrollEnd",function(){console.log("scrollEnd"),this.y-this.maxScrollY<300&&o.hbIscrollBottom()})})}]).directive("hbIscroll",function(){return{controller:"hbIscrollController",scope:{hbIscroll:"=",hbIscrollBottom:"&"}}})}();